databases:
  - name: database
    databaseName: nest
    user: postgres_user
    postgresMajorVersion: 13

services:
  - type: web
    name: backend
    env: docker
    dockerfilePath: ./Dockerfile
    envVars:
      - key: PORT
        value: '3000'
      - key: DATABASE_URL
      - key: JWT_SECRET
        sync: false
      - key: WS_JWT_SECRET
        sync: false
      - key: JWT_REFRESH_SECRET
        sync: false
        fromDatabase:
          type: database
          name: database
          envVarKey: RENDER_SERVICE_NAME

        fromEnvVar: WS_JWT_SECRET
    buildCommand: docker build -t backend -f Dockerfile .
